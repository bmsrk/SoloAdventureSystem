@inherits LayoutComponentBase

<header class="top-nav">
    <div class="nav-inner container-fluid">
        <div class="brand">
            <div class="brand-logo" aria-hidden="true"></div>
            <a href="/" class="brand-title">SoloAdventure</a>
        </div>

        <input id="nav-toggle" type="checkbox" class="nav-toggle" />
        <label for="nav-toggle" class="nav-toggle-button" title="Toggle navigation">
            <span></span>
        </label>

        <nav class="nav-links" role="navigation" onclick="document.getElementById('nav-toggle').checked = false">
            <a class="nav-link @(IsActive("/") ? "active" : "")" href="/">Home</a>
            <a class="nav-link @(IsActive("/generate") ? "active" : "")" href="/generate">World Generator</a>
            <a class="nav-link @(IsActive("/worlds") ? "active" : "")" href="/worlds">Manage Worlds</a>
        </nav>

        <div class="nav-actions">
            <a class="btn-link" href="https://github.com/bmsrk/SoloAdventureSystem" target="_blank" rel="noopener">GitHub</a>
        </div>
    </div>
</header>

<main class="page-main">
    @Body
</main>

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">X</span>
</div>

<style>
/* small helper overrides kept in component for quick adjustments */
.brand-title { text-decoration: none; color: inherit; font-weight: 700; }
</style>

@code {
    [Inject] private NavigationManager Navigation { get; set; } = default!;

    private bool IsActive(string href)
    {
        var currentPath = new Uri(Navigation.Uri).AbsolutePath;
        if (href == "/")
        {
            return currentPath == "/";
        }
        return currentPath.StartsWith(href, StringComparison.OrdinalIgnoreCase);
    }
}
